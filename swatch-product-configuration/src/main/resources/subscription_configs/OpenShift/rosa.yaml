---
platform: OpenShift

id: rosa

variants:
  - tag: rosa
    roles:
      - moa-hostedcontrolplane
      - moa
    productNames:
      - OpenShift Online

defaults:
  variant: rosa
  sla: PREMIUM
  usage: PRODUCTION

serviceType: rosa Instance

contractEnabled: true

metrics:
  - id: Instance-hours
    awsDimension: control_plane
    azureDimension: control_plane
    prometheus:
      queryKey: rosa
      queryParams:
        instanceKey: _id
        productLabelRegex: (moa-hostedcontrolplane|moa)
        metric: cluster:usage:workload:capacity_physical_instance_hours
        metadataMetric: ocm_subscription
  - id: Cores
    awsDimension: four_vcpu_hour
    azureDimension: four_vcpu_hour
    billingFactor: 0.25
    prometheus:
      queryKey: rosa
      queryParams:
        instanceKey: _id
        productLabelRegex: (moa-hostedcontrolplane|moa)
        metric: cluster:usage:workload:capacity_virtual_cpu_hours
        metadataMetric: ocm_subscription
