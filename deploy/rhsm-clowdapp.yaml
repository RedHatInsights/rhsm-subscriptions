---
apiVersion: v1
kind: Template
metadata:
  name: rhsm
parameters:
  - name: IMAGE_PULL_SECRET
    value: quay-cloudservices-pull
  - name: ENV_NAME
    value: env-rhsm

objects:
- apiVersion: cloud.redhat.com/v1alpha1
  kind: ClowdApp
  metadata:
    name: rhsm
  spec:
    # The name of the ClowdEnvironment providing the services
    envName: ${ENV_NAME}
    dependencies:
      - rbac
    optionalDependencies:
      - cloudigrade
      - host-inventory

    database:
      # Must specify both a name and a major postgres version
      name: rhsm-db
      version: 12

    pullSecrets:
      name: ${IMAGE_PULL_SECRET}
