<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <changeSet id="202104091791-1" author="khowell">
        <preConditions onFail="MARK_RAN">
          <and>
            <sqlCheck expectedResult="0">
              SELECT COUNT(1) FROM offering WHERE sku = 'MW01485'
            </sqlCheck>
            <columnExists tableName="offering" columnName="physical_cores"/>
            <columnExists tableName="offering" columnName="physical_sockets"/>
            <columnExists tableName="offering" columnName="virtual_cores"/>
            <columnExists tableName="offering" columnName="virtual_sockets"/>
          </and>
        </preConditions>
        <insert tableName="offering">
            <column name="sku" value="MW01485"/>
            <column name="product_name" value="OpenShift Container Platform"/>
            <column name="role" value="ocp"/>
            <column name="sla" value="Premium"/>
            <column name="usage" value="Production"/>
            <column name="physical_cores" value="0"/>
            <column name="physical_sockets" value="0"/>
            <column name="virtual_cores" value="0"/>
            <column name="virtual_sockets" value="0"/>
        </insert>
        <insert tableName="offering">
            <column name="sku" value="MW01484"/>
            <column name="product_name" value="OpenShift Dedicated"/>
            <column name="role" value="osd"/>
            <column name="sla" value="Premium"/>
            <column name="usage" value="Production"/>
            <column name="physical_cores" value="0"/>
            <column name="physical_sockets" value="0"/>
            <column name="virtual_cores" value="0"/>
            <column name="virtual_sockets" value="0"/>
        </insert>
    </changeSet>

  <changeSet id="202104091791-2" author="khowell">
    <preConditions onFail="MARK_RAN">
      <and>
        <sqlCheck expectedResult="0">
          SELECT COUNT(1) FROM offering WHERE sku = 'MW01485'
        </sqlCheck>
        <columnExists tableName="offering" columnName="cores"/>
        <columnExists tableName="offering" columnName="sockets"/>
        <columnExists tableName="offering" columnName="hypervisor_cores"/>
        <columnExists tableName="offering" columnName="hypervisor_sockets"/>
      </and>
    </preConditions>
    <insert tableName="offering">
      <column name="sku" value="MW01485"/>
      <column name="product_name" value="OpenShift Container Platform"/>
      <column name="role" value="ocp"/>
      <column name="sla" value="Premium"/>
      <column name="usage" value="Production"/>
      <column name="cores" value="0"/>
      <column name="sockets" value="0"/>
      <column name="hypervisor_cores" value="0"/>
      <column name="hypervisor_sockets" value="0"/>
    </insert>
    <insert tableName="offering">
      <column name="sku" value="MW01484"/>
      <column name="product_name" value="OpenShift Dedicated"/>
      <column name="role" value="osd"/>
      <column name="sla" value="Premium"/>
      <column name="usage" value="Production"/>
      <column name="cores" value="0"/>
      <column name="sockets" value="0"/>
      <column name="hypervisor_cores" value="0"/>
      <column name="hypervisor_sockets" value="0"/>
    </insert>
  </changeSet>

</databaseChangeLog>
